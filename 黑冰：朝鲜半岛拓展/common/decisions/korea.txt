#朝鲜半岛独立运动
KOR_Japan_Korea_Annexation_Treaty = {

	#对日本殖民据点发动的突袭战役
	KOR_communist_civil_war = {
		icon = generic_ignite_civil_war
		on_map_mode = decision_view_only #决议不会在地图模式下显示任何特殊标记或按钮，只会在决议界面（决议栏）中显示
		#state_target = yes #决议会对所有满足条件的 state（省份/地区）生成一个实例，state_target必须删除
		allowed = {
			tag = KOR
		}
		visible = {
			NOT = { has_government = communism }
			has_completed_focus = KOR_front_against_Japan
		}
		available = {
			date > 1937.6.4
			OR = {
				is_puppet_of = JAP
				is_in_faction_with = JAP
			}
		}
		cost = 100
		fire_only_once = yes #决议仅能使用一次
		days_remove = 14 #决议持续14天
		remove_effect = {
			country_event = {
				id = KOR_communism.2 #弹窗事件
				days = 3
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	#迁都平壤
	KOR_move_capital_to_pyeongchang = {
		icon = generic_operation
		on_map_mode = decision_view_only
		allowed = {
			tag = KOR
		}
		visible = {
			NOT = { has_government = fascism }
			has_completed_focus = KOR_controlled_north_front_line
		}
		available = {
			527 = { is_fully_controlled_by = ROOT }
			NOT = {
				is_puppet_of = JAP
				is_in_faction_with = JAP
			}
		}
		modifier = {
			civilian_factory_use = 2 #民用工厂运作
		}
		cost = 50
		fire_only_once = yes
		days_remove = 60
		remove_effect = {
			add_stability = 0.05 #稳定度+5%
			set_capital = { state = 527 } #设置首都:平壤
			hidden_effect = {
				set_victory_points = { province = 6944 value = 10 } #恩德
				set_victory_points = { province = 4052 value = 50 } #平壤
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	
	#韩国开始撤离（这个事件完成后KOR就不能再点国策了）
	KOR_neutrality_civil_war = {
		icon = generic_ignite_civil_war
		on_map_mode = decision_view_only
		allowed = {
			tag = KOR
		}
		visible = {
			NOT = { has_country_flag = KOR_neutrality_civil_war_started }
			NOT = { has_government = neutrality }
			has_completed_focus = KOR_CHI_civilwar #大韩民国临时政府要员撤离行动
		}
		available = {
			CHI = {
				exists = yes
				has_capitulated = no
			}
			KOR = {
				has_government = fascism
				OR = {
					is_puppet_of = JAP
					is_in_faction_with = JAP
				}
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = 7
		remove_effect = {
			set_country_flag = KOR_neutrality_civil_war_started
			country_event = {
				id = KOR_neutrality.2 #大韩民国临时政府要员撤离行动
				days = 3
			}
		}
		ai_will_do = {
			factor = 500
		}
	}
	#大韩民国请求在杭州建立临时政府(划分领土给KOR)
	KOR_host_country_decision_01 = {
		icon = generic_break_treaty
		on_map_mode = decision_view_only
		allowed = {
			tag = KOR
		}
		visible = {
			has_country_flag = KOR_neutrality_civil_war_started
			has_completed_focus = KOR_CHI_political_reform #大韩民国临时政府
		}
		available = {
			KOR = {
				has_government = neutrality
				is_government_in_exile = yes #是流亡政府
				has_capitulated = yes #停止抵抗
			}
			CHI = {
				exists = yes
				has_capitulated = no
				has_opinion = { target = KOR value > 29 }
				has_full_control_of_state = 596 #杭州
			}
		}
		cost = 10
		fire_only_once = yes
		days_remove = 7
		remove_effect = {
			CHI = {
				country_event = {
					id = KOR_neutrality.3 #KOR请求CHI在杭州建立流亡政府
					days = 3
				}
			}
		}
		ai_will_do = {
			factor = 500
		}
	}
	#大韩民国临时政府迁至杭州(去除领土的抵抗度)
	KOR_CHI_move_to_hangzhou = {
		icon = generic_decision
		on_map_mode = decision_view_only
		allowed = {
			tag = KOR
		}
		visible = {
			has_country_flag = KOR_neutrality_host_country_decision_completed #先完成请求事件KOR_neutrality.3，对应代码：events\KOR_neutrality.txt
		}
		available = {
			KOR = {
				has_government = neutrality
				is_government_in_exile = yes #是流亡政府
				has_capitulated = yes #停止抵抗
				has_full_control_of_state = 596
			}
		}
		cost = 50
		fire_only_once = yes #决议仅能使用一次
		days_remove = 30
		modifier = { civilian_factory_use = 1 } #民用工厂运作
		remove_effect = {
			set_rule = {
				can_send_volunteers = yes #允许派遣志愿军
				can_join_factions = yes #可以加入阵营
				can_not_declare_war = yes #禁止宣战
				#can_declare_war_on_same_ideology = yes
				#can_only_justify_war_on_threat_country = yes
			}
			596 = {
				add_state_modifier = {
					modifier = { resistance_target = -1.0 } #抵抗目标
					modifier = { resistance_decay = 1.0 } #抵抗下降速度
					modifier = { resistance_growth = -1.0 } #抵抗增长速度
					modifier = { compliance_growth = 1.0 } #顺从度增长速度
					modifier = { compliance_gain = 1.0 } #每日顺从度增长
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}

}

#中朝贸易援助
KOR_PRC_trade_effort = {

	#朝鲜粮食援助
	KOR_PRC_food_support = {
		icon = RAJ_famine
		allowed = {
			tag = KOR
		}
		visible = {
			tag = KOR
			check_variable = { food > 0 }
		}
		available = {
			KOR = {
				has_government = communism
				set_temp_variable = { food_fraction = food }
				divide_temp_variable = { food_fraction = food_max }
				custom_trigger_tooltip = {
					tooltip = food_over_25_TT
					check_variable = { food_fraction > 0.25 }
				}
			}
			PRC = {
				exists = yes
				has_capitulated = no
				has_government = communism
			}
		}
		ai_will_do = { factor = 100 }
		fire_only_once = no #决议可多次使用
		days_remove = 14 #决议持续14天
		days_re_enable = 14 #决议14天后可重新使用
		remove_effect = {
			KOR = {
				add_stability = 0.05 #稳定度+5%
				add_war_support = 0.05 #战争支持度+5%
				add_political_power = 50 #政治点数+50
				set_temp_variable = { food_sent = 20 } #设置临时变量food_sent为20
				custom_effect_tooltip = x_food_subtracted #提示文字:从库存中移除X食物
				subtract_from_variable = { food = 20 } #从库存中扣除20K食物
			}
			PRC = {
				set_temp_variable = { food_received = 20 } #设置临时变量food_received为20
				custom_effect_tooltip = x_food_added #提示文字:从库存中移除X食物
				add_to_variable = { food = 20 } #向库存中添加20K食物
				add_opinion_modifier = {
					target = PRC
					modifier = offered_support # PRC对KOR好感度提升
				}
			}
		}
	}

}

#建设开发
KOR_economic_aid = {

	#土地资源开发
	KOR_sov_support_construction = {
		icon = generic_construction
		allowed = {
			tag = KOR
		}
		visible = {
			tag = KOR
		}
		available = {
			KOR = {
				has_government = communism
				has_completed_focus = KOR_sov_land_development #土地资源开发
			}
			SOV = {
				exists = yes
				has_capitulated = no
				has_government = communism
			}
		}
		cost = 30
		ai_will_do = { factor = 75 }
		fixed_random_seed = no
		fire_only_once = no #决议可多次使用
		modifier = {
			civilian_factory_use = 2
		}
		days_remove = 90 #决议持续90天
		remove_effect = {
			random_list = {
				35 = {
					random_owned_controlled_state = {
						add_building_construction = {
							type = infrastructure
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}
				}
				25 = {
					random_owned_controlled_state = {
						add_building_construction = {
							type = industrial_complex
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}
				}
				20 = {
					random_owned_controlled_state = {
						add_building_construction = {
							type = arms_factory
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}
				}
				10 = {
					random_owned_controlled_state = {
						add_building_construction = {
							type = power_plant
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}
				}
				5 = {
					random_owned_controlled_state = {
						add_building_construction = {
							type = steel_refinery
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}
				}
				3 = {
					random_owned_controlled_state = {
						add_building_construction = {
							type = shipyard
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}
				}
				2 = {
					random_owned_controlled_state = {
						add_building_construction = {
							type = shipyard_capital_building
							level = 1
							instant_build = yes
						}
						add_extra_state_shared_building_slots = 1
					}
				}
			}
		}
	}
	#矿产资源探勘
	KOR_sov_mineral_development = {
		icon = generic_construction
		allowed = {
			tag = KOR
		}
		visible = {
			tag = KOR
		}
		available = {
			KOR = {
				has_government = communism
				has_completed_focus = KOR_sov_mineral_development #矿产资源探勘
			}
			SOV = {
				exists = yes
				has_capitulated = no
				has_government = communism
			}
		}
		cost = 30
		ai_will_do = { factor = 70 }
		fixed_random_seed = no
		fire_only_once = no #决议可多次使用
		modifier = {
			civilian_factory_use = 3
		}
		days_remove = 90 #决议持续90天
		remove_effect = {
			random_list = {
				40 = {
					random_owned_controlled_state = {
						add_resource = {
							type = food
							amount = 1
						}
					}
				}
				20 = {
					random_owned_controlled_state = {
						add_resource = {
							type = coal
							amount = 1
						}
					}
				}
				20 = {
					random_owned_controlled_state = {
						add_resource = {
							type = iron
							amount = 1
						}
					}
				}
				10 = {
					random_owned_controlled_state = {
						add_resource = {
							type = bauxite
							amount = 1
						}
					}
				}
				10 = {
					random_owned_controlled_state = {
						add_resource = {
							type = rubber
							amount = 1
						}
					}
				}
			}
		}
	}

}